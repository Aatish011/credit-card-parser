<!DOCTYPE html>
<html lang="en" class="h-full bg-slate-100">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit Card Statement Parser</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Simple spinner for loading state */
        .loader {
            border-top-color: #ffffff;
            animation: spinner 1.5s linear infinite;
        }
        @keyframes spinner {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="h-full font-sans">
    <div class="flex min-h-full items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
        <div class="w-full max-w-2xl space-y-6">
            <!-- Header -->
            <div class="text-center">
                <svg class="mx-auto h-12 w-auto text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 21z" />
                </svg>
                <h2 class="mt-4 text-center text-3xl font-bold tracking-tight text-slate-900">
                    Statement Parser
                </h2>
                <p class="mt-2 text-center text-sm text-slate-600">
                    Upload a PDF to instantly extract key data.
                </p>
            </div>

            <!-- Main Card -->
            <div class="bg-white p-8 rounded-2xl shadow-lg space-y-8">
                <form id="upload-form" action="/" method="post" enctype="multipart/form-data">
                    <div>
                        <label for="file-upload" class="relative block w-full h-48 rounded-lg border-2 border-dashed border-slate-300 text-center hover:border-indigo-500 transition-colors duration-200 ease-in-out cursor-pointer">
                            <div class="flex flex-col justify-center items-center h-full text-slate-500">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 text-slate-400">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
                                </svg>
                                <p class="mt-2 font-semibold text-indigo-600" id="file-name-display">Choose a PDF file</p>
                                <p class="text-xs text-slate-500">up to 16MB</p>
                            </div>
                        </label>
                        <input id="file-upload" name="file" type="file" class="sr-only" accept=".pdf" required onchange="document.getElementById('file-name-display').textContent = this.files[0] ? this.files[0].name : 'Choose a PDF file';">
                    </div>

                    <div>
                        <button id="submit-button" type="submit" class="group relative flex w-full justify-center rounded-lg bg-indigo-600 px-4 py-3 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 transition-colors duration-200 ease-in-out">
                            <span class="button-text">Parse Statement</span>
                            <div class="loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-5 w-5 ml-3 hidden"></div>
                        </button>
                    </div>
                </form>

                <!-- Results Section -->
                {% if data %}
                <div class="border-t border-slate-200 pt-8">
                    <h3 class="text-lg font-semibold leading-6 text-slate-900">Parsing Results for <span class="font-bold text-indigo-600">{{ filename }}</span></h3>
                    <div class="mt-4">
                        <dl class="divide-y divide-slate-200">
                            {% if data.error %}
                                <div class="py-3 grid grid-cols-3 gap-4">
                                    <dt class="text-sm font-medium text-red-600">Error</dt>
                                    <dd class="mt-1 text-sm text-red-700 sm:col-span-2 sm:mt-0">{{ data.error }}</dd>
                                </div>
                            {% else %}
                                {% for key, value in data.items() %}
                                <div class="py-3 grid grid-cols-3 gap-4">
                                    <dt class="text-sm font-medium text-slate-500">{{ key.replace('_', ' ').title() }}</dt>
                                    <dd class="mt-1 text-sm font-semibold text-slate-900 sm:col-span-2 sm:mt-0">{{ value }}</dd>
                                </div>
                                {% endfor %}
                            {% endif %}
                        </dl>
                    </div>
                </div>
                {% endif %}
            </div>

            <p class="text-center text-xs text-slate-500">&copy; 2025 Statement Parser Inc.</p>
        </div>
    </div>
    <script>
        document.getElementById('upload-form').addEventListener('submit', function() {
            // Show loader and disable button on submit
            const button = document.getElementById('submit-button');
            const buttonText = button.querySelector('.button-text');
            const loader = button.querySelector('.loader');

            buttonText.textContent = 'Parsing...';
            loader.classList.remove('hidden');
            button.disabled = true;
        });
    </script>
</body>
</html>

